---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <div class="container">
    <!-- Fixed logo mask with moving gradient inside -->
    <div class="logo-mask">
      <div class="gradient-layer" id="gradientLayer"></div>
    </div>
    
    <!-- Small watermark logo in bottom left -->
    <div class="watermark">
      <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512">
        <line x1="231.9" y1="155.2" x2="231.9" y2="303.2" fill="#fff" stroke="#fff" stroke-miterlimit="10" stroke-width="20"/>
        <line x1="155.6" y1="233.2" x2="304.6" y2="233.2" fill="#fff" stroke="#fff" stroke-miterlimit="10" stroke-width="20"/>
        <path d="M232.1,317.5v14.8c0,54.4,44.1,98.6,98.6,98.6s98.6-44.1,98.6-98.6-44.1-98.6-98.6-98.6h-12.8" fill="none" stroke="#fff" stroke-miterlimit="10" stroke-width="20"/>
        <path d="M142.9,133.2h-9.4c-27.7,0-50.1,22.4-50.1,50.1s22.4,50.1,50.1,50.1h9.4" fill="none" stroke="#fff" stroke-miterlimit="10" stroke-width="20"/>
        <path d="M232.4,140.9v-9.4c0-27.7-22.4-50.1-50.1-50.1s-50.1,22.4-50.1,50.1v9.4" fill="none" stroke="#fff" stroke-miterlimit="10" stroke-width="20"/>
      </svg>
    </div>
  </div>
</Layout>

<style>
  .container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #000000;
    overflow: hidden;
    margin: 0;
    padding: 0;
  }

  .logo-mask {
    position: fixed;
    inset: 0;
    overflow: hidden;
    mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M291.8,362.4h-44.9l-2.4-5.7c-16.9-39.9-44.9-106.7-63.6-151.5-12.9,30.8-35.6,85.1-39.7,94.9l-26.3,62.3h-44.9l90.8-214h40.1l90.8,214Z' fill='white'/%3E%3Cpath d='M364.1,361h-38l-86.6-214h44.5l61.2,154.1,61.1-154.1h44.5l-86.6,214Z' fill='white'/%3E%3Cpath d='M470.9,356v-203.9h150v22.2h-126.9v68.4h87.7v22.5h-87.7v68.7h117.5l-9.4,22.2h-131.2Z' fill='white'/%3E%3Cpath d='M605.4,360.9h-139.5v-213.9h160v32.2h-126.9v58.4h87.7v32.5h-87.7v58.7h120l-13.6,32.2Z' fill='white'/%3E%3Cpath d='M-86.2,356v-203.9H63.7v22.2H-63.2v68.4H24.5v22.5H-63.2v68.7H54.3l-9.4,22.2H-86.2Z' fill='white'/%3E%3Cpath d='M48.9,362H-92.2v-215.9H69.7v34.2H-57.2v56.4H30.5v34.5H-57.2v56.7H63.4l-14.5,34.2Z' fill='white'/%3E%3C/svg%3E");
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M291.8,362.4h-44.9l-2.4-5.7c-16.9-39.9-44.9-106.7-63.6-151.5-12.9,30.8-35.6,85.1-39.7,94.9l-26.3,62.3h-44.9l90.8-214h40.1l90.8,214Z' fill='white'/%3E%3Cpath d='M364.1,361h-38l-86.6-214h44.5l61.2,154.1,61.1-154.1h44.5l-86.6,214Z' fill='white'/%3E%3Cpath d='M470.9,356v-203.9h150v22.2h-126.9v68.4h87.7v22.5h-87.7v68.7h117.5l-9.4,22.2h-131.2Z' fill='white'/%3E%3Cpath d='M605.4,360.9h-139.5v-213.9h160v32.2h-126.9v58.4h87.7v32.5h-87.7v58.7h120l-13.6,32.2Z' fill='white'/%3E%3Cpath d='M-86.2,356v-203.9H63.7v22.2H-63.2v68.4H24.5v22.5H-63.2v68.7H54.3l-9.4,22.2H-86.2Z' fill='white'/%3E%3Cpath d='M48.9,362H-92.2v-215.9H69.7v34.2H-57.2v56.4H30.5v34.5H-57.2v56.7H63.4l-14.5,34.2Z' fill='white'/%3E%3C/svg%3E");
    mask-size: contain;
    -webkit-mask-size: contain;
    mask-position: center;
    -webkit-mask-position: center;
    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;
    filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.6))
      drop-shadow(0 0 60px rgba(255, 100, 200, 0.4))
      drop-shadow(0 0 100px rgba(100, 200, 255, 0.3));
    pointer-events: none;
  }

  .gradient-layer {
    position: absolute;
    width: 300vw;
    height: 300vh;
    left: -100vw;
    top: -100vh;
    background: radial-gradient(circle at 20% 20%, #ff0000 0%, transparent 35%),
      radial-gradient(circle at 80% 20%, #ff00ff 0%, transparent 35%),
      radial-gradient(circle at 50% 30%, #00ffff 0%, transparent 35%),
      radial-gradient(circle at 20% 50%, #00ff00 0%, transparent 35%),
      radial-gradient(circle at 80% 50%, #ffff00 0%, transparent 35%),
      radial-gradient(circle at 35% 70%, #ff6600 0%, transparent 35%),
      radial-gradient(circle at 65% 70%, #0000ff 0%, transparent 35%),
      radial-gradient(circle at 50% 85%, #ff0088 0%, transparent 35%),
      radial-gradient(
        ellipse at center,
        #ff0000 0%,
        #ff6600 12%,
        #ffff00 25%,
        #00ff00 37%,
        #00ffff 50%,
        #0000ff 62%,
        #ff00ff 75%,
        #ff0088 87%,
        #ff0000 100%
      );
    background-size: 50vw 50vh;
    background-repeat: repeat;
    animation: drift 10s ease-in-out infinite;
    will-change: transform;
    cursor: grab;
  }
  
  .gradient-layer.dragging {
    cursor: grabbing;
  }
  
  .watermark {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 40px;
    height: 40px;
    opacity: 0.6;
    z-index: 10;
    pointer-events: none;
  }
  
  .watermark svg {
    width: 100%;
    height: 100%;
  }

  /* Subtle drift animation to show it's interactive */
  @keyframes drift {
    0% {
      transform: translate(0, 0);
    }
    25% {
      transform: translate(30px, -20px);
    }
    50% {
      transform: translate(-20px, 30px);
    }
    75% {
      transform: translate(20px, 20px);
    }
    100% {
      transform: translate(0, 0);
    }
  }
</style>

<script>
  const gradientLayer = document.getElementById("gradientLayer") as HTMLElement;
  let isDragging = false;
  let startX = 0;
  let startY = 0;
  let currentX = 0;
  let currentY = 0;

  function handleStart(e: MouseEvent | TouchEvent) {
    isDragging = true;
    const point = "touches" in e ? e.touches[0] : e;
    startX = point.clientX;
    startY = point.clientY;

    // Pause drift animation and add dragging class
    if (gradientLayer) {
      gradientLayer.style.animationPlayState = "paused";
      gradientLayer.classList.add("dragging");
      
      // Get current animated position
      const style = window.getComputedStyle(gradientLayer);
      const matrix = new DOMMatrix(style.transform);
      currentX = matrix.m41;
      currentY = matrix.m42;
      
      // Clear the animation transform
      gradientLayer.style.animation = "none";
    }
  }

  function handleMove(e: MouseEvent | TouchEvent) {
    if (!isDragging) return;

    e.preventDefault();
    const point = "touches" in e ? e.touches[0] : e;

    const deltaX = point.clientX - startX;
    const deltaY = point.clientY - startY;

    currentX += deltaX;
    currentY += deltaY;

    if (gradientLayer) {
      gradientLayer.style.transform = `translate(${currentX}px, ${currentY}px)`;
    }

    startX = point.clientX;
    startY = point.clientY;
  }

  function handleEnd() {
    isDragging = false;

    // Resume drift animation and remove dragging class
    if (gradientLayer) {
      gradientLayer.classList.remove("dragging");
      gradientLayer.style.animation = "drift 10s ease-in-out infinite";
    }
  }

  // Mouse events
  document.addEventListener("mousedown", handleStart);
  document.addEventListener("mousemove", handleMove);
  document.addEventListener("mouseup", handleEnd);

  // Touch events
  document.addEventListener("touchstart", handleStart, { passive: false });
  document.addEventListener("touchmove", handleMove, { passive: false });
  document.addEventListener("touchend", handleEnd);
</script>

---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <div class="container">
    <!-- Fixed logo mask with moving gradient inside -->
    <div class="logo-mask">
      <div class="gradient-layer" id="gradientLayer"></div>
    </div>

    <!-- Small watermark logo in bottom left -->
    <div class="watermark">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="512"
        height="512"
        viewBox="0 0 512 512"
      >
        <line
          x1="231.9"
          y1="155.2"
          x2="231.9"
          y2="303.2"
          fill="#fff"
          stroke="#fff"
          stroke-miterlimit="10"
          stroke-width="20"></line>
        <line
          x1="155.6"
          y1="233.2"
          x2="304.6"
          y2="233.2"
          fill="#fff"
          stroke="#fff"
          stroke-miterlimit="10"
          stroke-width="20"></line>
        <path
          d="M232.1,317.5v14.8c0,54.4,44.1,98.6,98.6,98.6s98.6-44.1,98.6-98.6-44.1-98.6-98.6-98.6h-12.8"
          fill="none"
          stroke="#fff"
          stroke-miterlimit="10"
          stroke-width="20"></path>
        <path
          d="M142.9,133.2h-9.4c-27.7,0-50.1,22.4-50.1,50.1s22.4,50.1,50.1,50.1h9.4"
          fill="none"
          stroke="#fff"
          stroke-miterlimit="10"
          stroke-width="20"></path>
        <path
          d="M232.4,140.9v-9.4c0-27.7-22.4-50.1-50.1-50.1s-50.1,22.4-50.1,50.1v9.4"
          fill="none"
          stroke="#fff"
          stroke-miterlimit="10"
          stroke-width="20"></path>
      </svg>
    </div>
  </div>
</Layout>

<style>
  .container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #000000;
    overflow: hidden;
    margin: 0;
    padding: 0;
  }

  .logo-mask {
    position: fixed;
    inset: 0;
    overflow: hidden;
    mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cg%3E%3Cpath d='M78.6,299.8v-86.8h41.6c8.9,0,16,2.5,21.3,7.3,5.3,4.9,7.9,11.5,7.9,19.8s-1.1,10.1-3.2,13.4c-2.1,3.3-4.8,5.8-8.1,7.5-3.2,1.7-6.5,2.9-9.7,3.7l22.8,35h-11.7l-21-33.3h-30.2v33.3h-9.8Z' fill='white'/%3E%3Cpath d='M162.3,299.8v-86.8h74.5l-4,9.4h-60.7v29.1h49.1l-4.1,9.6h-45.1v29.2h34l-4,9.4h-39.9Z' fill='white'/%3E%3C/g%3E%3Cpath d='M383.7,267' fill='white'/%3E%3Cpath d='M358.3,299.8v-70.5l6.8-16.3h67.7l-4,9.4h-60.7v29.1h49.1l-4.1,9.6h-45.1v29.2h34l-4,9.4h-39.9Z' fill='white'/%3E%3Cg%3E%3Cpath d='M222.7,299.8h-10.9l36.9-86.8h12.3l36.9,86.8h-10.9l-32.1-76.6-32.1,76.6Z' fill='white'/%3E%3Cpath d='M309.2,299.8l-35.1-86.8h10.8l30,75.7,30-75.7h10.8l-35.1,86.8h-11.3Z' fill='white'/%3E%3C/g%3E%3C/svg%3E");
    -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cg%3E%3Cpath d='M78.6,299.8v-86.8h41.6c8.9,0,16,2.5,21.3,7.3,5.3,4.9,7.9,11.5,7.9,19.8s-1.1,10.1-3.2,13.4c-2.1,3.3-4.8,5.8-8.1,7.5-3.2,1.7-6.5,2.9-9.7,3.7l22.8,35h-11.7l-21-33.3h-30.2v33.3h-9.8Z' fill='white'/%3E%3Cpath d='M162.3,299.8v-86.8h74.5l-4,9.4h-60.7v29.1h49.1l-4.1,9.6h-45.1v29.2h34l-4,9.4h-39.9Z' fill='white'/%3E%3C/g%3E%3Cpath d='M383.7,267' fill='white'/%3E%3Cpath d='M358.3,299.8v-70.5l6.8-16.3h67.7l-4,9.4h-60.7v29.1h49.1l-4.1,9.6h-45.1v29.2h34l-4,9.4h-39.9Z' fill='white'/%3E%3Cg%3E%3Cpath d='M222.7,299.8h-10.9l36.9-86.8h12.3l36.9,86.8h-10.9l-32.1-76.6-32.1,76.6Z' fill='white'/%3E%3Cpath d='M309.2,299.8l-35.1-86.8h10.8l30,75.7,30-75.7h10.8l-35.1,86.8h-11.3Z' fill='white'/%3E%3C/g%3E%3C/svg%3E");
    mask-size: contain;
    -webkit-mask-size: contain;
    mask-position: center;
    -webkit-mask-position: center;
    mask-repeat: no-repeat;
    -webkit-mask-repeat: no-repeat;
    filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.6))
      drop-shadow(0 0 60px rgba(255, 100, 200, 0.4))
      drop-shadow(0 0 100px rgba(100, 200, 255, 0.3));
    pointer-events: none;
    animation: zoomIn 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  .gradient-layer {
    position: absolute;
    width: 300vw;
    height: 300vh;
    left: -100vw;
    top: -100vh;
    background: radial-gradient(circle at 20% 20%, #ff0000 0%, transparent 35%),
      radial-gradient(circle at 80% 20%, #ff00ff 0%, transparent 35%),
      radial-gradient(circle at 50% 30%, #00ffff 0%, transparent 35%),
      radial-gradient(circle at 20% 50%, #00ff00 0%, transparent 35%),
      radial-gradient(circle at 80% 50%, #ffff00 0%, transparent 35%),
      radial-gradient(circle at 35% 70%, #ff6600 0%, transparent 35%),
      radial-gradient(circle at 65% 70%, #0000ff 0%, transparent 35%),
      radial-gradient(circle at 50% 85%, #ff0088 0%, transparent 35%),
      radial-gradient(
        ellipse at center,
        #ff0000 0%,
        #ff6600 12%,
        #ffff00 25%,
        #00ff00 37%,
        #00ffff 50%,
        #0000ff 62%,
        #ff00ff 75%,
        #ff0088 87%,
        #ff0000 100%
      );
    background-size: 25vw 25vh;
    background-repeat: repeat;
    animation: drift 10s ease-in-out infinite;
    will-change: transform;
    cursor: grab;
  }

  .gradient-layer.dragging {
    cursor: grabbing;
  }

  .watermark {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 40px;
    height: 40px;
    opacity: 0.6;
    z-index: 10;
    pointer-events: none;
  }

  .watermark svg {
    width: 100%;
    height: 100%;
  }

  /* Zoom in animation on page load */
  @keyframes zoomIn {
    0% {
      transform: scale(100);
    }
    100% {
      transform: scale(1);
    }
  }

  /* Subtle drift animation to show it's interactive */
  @keyframes drift {
    0% {
      transform: translate(0, 0);
    }
    25% {
      transform: translate(30px, -20px);
    }
    50% {
      transform: translate(-20px, 30px);
    }
    75% {
      transform: translate(20px, 20px);
    }
    100% {
      transform: translate(0, 0);
    }
  }
</style>

<script>
  const gradientLayer = document.getElementById("gradientLayer") as HTMLElement;
  let isDragging = false;
  let startX = 0;
  let startY = 0;
  let currentX = 0;
  let currentY = 0;

  function handleStart(e: MouseEvent | TouchEvent) {
    isDragging = true;
    const point = "touches" in e ? e.touches[0] : e;
    startX = point.clientX;
    startY = point.clientY;

    // Pause drift animation and add dragging class
    if (gradientLayer) {
      gradientLayer.style.animationPlayState = "paused";
      gradientLayer.classList.add("dragging");

      // Get current animated position
      const style = window.getComputedStyle(gradientLayer);
      const matrix = new DOMMatrix(style.transform);
      currentX = matrix.m41;
      currentY = matrix.m42;

      // Clear the animation transform
      gradientLayer.style.animation = "none";
    }
  }

  function handleMove(e: MouseEvent | TouchEvent) {
    if (!isDragging) return;

    e.preventDefault();
    const point = "touches" in e ? e.touches[0] : e;

    const deltaX = point.clientX - startX;
    const deltaY = point.clientY - startY;

    currentX += deltaX;
    currentY += deltaY;

    if (gradientLayer) {
      gradientLayer.style.transform = `translate(${currentX}px, ${currentY}px)`;
    }

    startX = point.clientX;
    startY = point.clientY;
  }

  function handleEnd() {
    isDragging = false;

    // Resume drift animation and remove dragging class
    if (gradientLayer) {
      gradientLayer.classList.remove("dragging");
      gradientLayer.style.animation = "drift 10s ease-in-out infinite";
    }
  }

  // Mouse events
  document.addEventListener("mousedown", handleStart);
  document.addEventListener("mousemove", handleMove);
  document.addEventListener("mouseup", handleEnd);

  // Touch events
  document.addEventListener("touchstart", handleStart, { passive: false });
  document.addEventListener("touchmove", handleMove, { passive: false });
  document.addEventListener("touchend", handleEnd);
</script>

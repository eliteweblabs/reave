---
import Layout from "../layouts/Layout.astro";
---

<Layout>
  <div class="container">
    <div class="content">
      <!-- Logo mask that reveals moving content underneath -->
      <div class="logo-mask-wrapper">
        <div class="background-layer" id="bgLayer"></div>
        <svg
          class="logo-mask"
          viewBox="0 0 500 180"
          xmlns="http://www.w3.org/2000/svg"
        >
          <defs>
            <mask id="logoMask">
              <rect width="100%" height="100%" fill="black"></rect>
              <!-- /\V shape - bold angular strokes matching actual logo -->
              <g fill="white">
                <!-- Left stroke / - thick parallelogram -->
                <polygon points="20,160 80,160 180,30 120,30"></polygon>
                <!-- Middle left stroke \ - thick parallelogram -->
                <polygon points="140,30 200,30 240,120 180,120"></polygon>
                <!-- Middle right stroke / - thick parallelogram -->
                <polygon points="220,120 280,120 380,30 320,30"></polygon>
                <!-- Right stroke \ - thick parallelogram -->
                <polygon points="360,30 420,30 480,160 420,160"></polygon>
              </g>
            </mask>
          </defs>
          <rect width="100%" height="100%" mask="url(#logoMask)" fill="white"
          ></rect>
        </svg>
      </div>

      <h1 class="title">Coming Soon</h1>
      <p class="subtitle">Something exciting is on the way</p>

      <div class="cta">
        <input
          type="email"
          placeholder="Enter your email"
          class="email-input"
        />
        <button class="notify-btn">Notify Me</button>
      </div>
    </div>
  </div>
</Layout>

<style>
  .container {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
    color: white;
    padding: 2rem;
    overflow: hidden;
  }

  .content {
    text-align: center;
    max-width: 600px;
    width: 100%;
  }

  .logo-mask-wrapper {
    position: relative;
    width: 100%;
    max-width: 400px;
    margin: 0 auto 3rem;
    aspect-ratio: 2.5 / 1;
    overflow: hidden;
    border-radius: 20px;
  }

  .background-layer {
    position: absolute;
    top: -20%;
    left: -20%;
    width: 140%;
    height: 140%;
    background: radial-gradient(circle at 30% 50%, #ff006e 0%, transparent 50%),
      radial-gradient(circle at 70% 50%, #8338ec 0%, transparent 50%),
      radial-gradient(circle at 50% 80%, #3a86ff 0%, transparent 50%),
      linear-gradient(135deg, #fb5607 0%, #ff006e 50%, #8338ec 100%);
    background-size: 200% 200%;
    transition: transform 0.1s ease-out;
    will-change: transform;
  }

  .logo-mask {
    position: relative;
    width: 100%;
    height: 100%;
    z-index: 1;
    filter: drop-shadow(0 10px 40px rgba(255, 255, 255, 0.3));
  }

  .title {
    font-size: clamp(2.5rem, 8vw, 4rem);
    font-weight: 700;
    margin: 0 0 1rem;
    background: linear-gradient(135deg, #ffffff 0%, #a8a8a8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.02em;
  }

  .subtitle {
    font-size: clamp(1rem, 3vw, 1.25rem);
    color: rgba(255, 255, 255, 0.7);
    margin: 0 0 3rem;
    font-weight: 300;
  }

  .cta {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
  }

  .email-input {
    flex: 1;
    min-width: 200px;
    max-width: 300px;
    padding: 1rem 1.5rem;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    background: rgba(255, 255, 255, 0.05);
    color: white;
    font-size: 1rem;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
  }

  .email-input::placeholder {
    color: rgba(255, 255, 255, 0.5);
  }

  .email-input:focus {
    outline: none;
    border-color: rgba(255, 255, 255, 0.4);
    background: rgba(255, 255, 255, 0.08);
  }

  .notify-btn {
    padding: 1rem 2rem;
    border-radius: 12px;
    border: none;
    background: linear-gradient(135deg, #ff006e 0%, #8338ec 100%);
    color: white;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(255, 0, 110, 0.3);
  }

  .notify-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(255, 0, 110, 0.4);
  }

  .notify-btn:active {
    transform: translateY(0);
  }

  @media (max-width: 600px) {
    .cta {
      flex-direction: column;
    }

    .email-input {
      max-width: 100%;
    }
  }
</style>

<script>
  // Gyroscope and mouse parallax effect
  const bgLayer = document.getElementById("bgLayer");
  let isGyroAvailable = false;
  let mouseX = 0;
  let mouseY = 0;

  // Smooth animation values
  let currentX = 0;
  let currentY = 0;
  let targetX = 0;
  let targetY = 0;

  // Request permission for iOS 13+ devices
  async function requestGyroPermission() {
    if (
      typeof DeviceOrientationEvent !== "undefined" &&
      typeof (DeviceOrientationEvent as any).requestPermission === "function"
    ) {
      try {
        const permission = await (
          DeviceOrientationEvent as any
        ).requestPermission();
        if (permission === "granted") {
          isGyroAvailable = true;
          window.addEventListener("deviceorientation", handleOrientation);
        }
      } catch (error) {
        console.log("Gyroscope permission denied");
      }
    } else if ("DeviceOrientationEvent" in window) {
      // Android and older iOS devices
      isGyroAvailable = true;
      window.addEventListener("deviceorientation", handleOrientation);
    }
  }

  // Handle device orientation (gyroscope)
  function handleOrientation(event: DeviceOrientationEvent) {
    if (!event.beta || !event.gamma) return;

    // Beta: front-to-back tilt (-180 to 180)
    // Gamma: left-to-right tilt (-90 to 90)
    const beta = event.beta || 0;
    const gamma = event.gamma || 0;

    // Normalize and limit movement
    targetX = Math.max(-30, Math.min(30, gamma * 0.8));
    targetY = Math.max(-30, Math.min(30, (beta - 45) * 0.5)); // Offset by 45 for natural holding position
  }

  // Handle mouse movement (desktop fallback)
  function handleMouseMove(event: MouseEvent) {
    if (isGyroAvailable) return; // Don't use mouse if gyro is active

    const centerX = window.innerWidth / 2;
    const centerY = window.innerHeight / 2;

    mouseX = ((event.clientX - centerX) / centerX) * 30;
    mouseY = ((event.clientY - centerY) / centerY) * 30;

    targetX = mouseX;
    targetY = mouseY;
  }

  // Smooth animation loop
  function animate() {
    // Lerp (linear interpolation) for smooth movement
    currentX += (targetX - currentX) * 0.1;
    currentY += (targetY - currentY) * 0.1;

    if (bgLayer) {
      bgLayer.style.transform = `translate(${currentX}px, ${currentY}px) scale(1.2)`;
    }

    requestAnimationFrame(animate);
  }

  // Initialize
  window.addEventListener("mousemove", handleMouseMove);

  // Try to enable gyroscope on user interaction (required for iOS)
  document.addEventListener("click", requestGyroPermission, { once: true });
  document.addEventListener("touchstart", requestGyroPermission, {
    once: true,
  });

  // Start animation loop
  animate();

  // Handle email form submission
  const emailInput = document.querySelector(".email-input") as HTMLInputElement;
  const notifyBtn = document.querySelector(".notify-btn") as HTMLButtonElement;

  notifyBtn?.addEventListener("click", () => {
    const email = emailInput?.value;
    if (email && email.includes("@")) {
      // Add your email collection logic here
      notifyBtn.textContent = "Thanks!";
      notifyBtn.style.background =
        "linear-gradient(135deg, #10b981 0%, #059669 100%)";
      setTimeout(() => {
        notifyBtn.textContent = "Notify Me";
        notifyBtn.style.background =
          "linear-gradient(135deg, #ff006e 0%, #8338ec 100%)";
        emailInput.value = "";
      }, 2000);
    } else {
      emailInput?.focus();
    }
  });

  // Allow Enter key to submit
  emailInput?.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
      notifyBtn?.click();
    }
  });
</script>

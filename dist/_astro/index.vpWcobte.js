const ee=(e,r,t)=>!e&&t?re(t):te(r),re=e=>{const r=e.userId,t=e.user,n=e.sessionId,s=e.sessionStatus,o=e.sessionClaims;return{userId:r,user:t,sessionId:n,session:e.session,sessionStatus:s,sessionClaims:o,organization:e.organization,orgId:e.orgId,orgRole:e.orgRole,orgPermissions:e.orgPermissions,orgSlug:e.orgSlug,actor:e.actor,factorVerificationAge:e.factorVerificationAge}},te=e=>{const r=e.user?e.user.id:e.user,t=e.user,n=e.session?e.session.id:e.session,s=e.session,o=e.session?.status,i=e.session?e.session.lastActiveToken?.jwt?.claims:null,d=e.session?e.session.factorVerificationAge:null,u=s?.actor,l=e.organization,a=e.organization?e.organization.id:e.organization,c=l?.slug,g=l&&t?.organizationMemberships?.find(Z=>Z.organization.id===a),Q=g&&g.permissions;return{userId:r,user:t,sessionId:n,session:s,sessionStatus:o,sessionClaims:i,organization:l,orgId:a,orgRole:g&&g.role,orgSlug:c,orgPermissions:Q,actor:u,factorVerificationAge:d}},ne=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],D=e=>typeof atob<"u"&&typeof atob=="function"?atob(e):typeof global<"u"&&global.Buffer?new global.Buffer(e,"base64").toString():e,z="pk_live_",se="pk_test_";function $(e){if(!e.endsWith("$"))return!1;const r=e.slice(0,-1);return r.includes("$")?!1:r.includes(".")}function T(e,r={}){if(e=e||"",!e||!O(e)){if(r.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(r.fatal&&!O(e))throw new Error("Publishable key not valid.");return null}const t=e.startsWith(z)?"production":"development";let n;try{n=D(e.split("_")[2])}catch{if(r.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!$(n)){if(r.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let s=n.slice(0,-1);return r.proxyUrl?s=r.proxyUrl:t!=="development"&&r.domain&&r.isSatellite&&(s=`clerk.${r.domain}`),{instanceType:t,frontendApi:s}}function O(e=""){try{if(!(e.startsWith(z)||e.startsWith(se)))return!1;const r=e.split("_");if(r.length!==3)return!1;const t=r[2];return t?$(D(t)):!1}catch{return!1}}function oe(){const e=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;const t=typeof r=="string"?r:r.hostname;let n=e.get(t);return n===void 0&&(n=ne.some(s=>t.endsWith(s)),e.set(t,n)),n}}}function P(e){return!1}const ie="METHOD_CALLED",ae=.1;function le(e,r){return{event:ie,eventSamplingRate:ae,payload:{method:e,...r}}}let f=[],h=0;const v=4;let b=0,R=e=>{let r=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(n){return t.lc=r.push(n),()=>{for(let o=h+v;o<f.length;)f[o]===n?f.splice(o,v):o+=v;let s=r.indexOf(n);~s&&(r.splice(s,1),--t.lc||t.off())}},notify(n,s){b++;let o=!f.length;for(let i of r)f.push(i,t.value,n,s);if(o){for(h=0;h<f.length;h+=v)f[h](f[h+1],f[h+2],f[h+3]);f.length=0}},off(){},set(n){let s=t.value;s!==n&&(t.value=n,t.notify(s))},subscribe(n){let s=t.listen(n);return n(t.value),s},value:e};return t};const ce=5,E=6,w=10;let ue=(e,r,t,n)=>(e.events=e.events||{},e.events[t+w]||(e.events[t+w]=n(s=>{e.events[t].reduceRight((o,i)=>(i(o),o),{shared:{},...s})})),e.events[t]=e.events[t]||[],e.events[t].push(r),()=>{let s=e.events[t],o=s.indexOf(r);s.splice(o,1),s.length||(delete e.events[t],e.events[t+w](),delete e.events[t+w])}),de=1e3,K=(e,r)=>ue(e,n=>{let s=r(n);s&&e.events[E].push(s)},ce,n=>{let s=e.listen;e.listen=(...i)=>(!e.lc&&!e.active&&(e.active=!0,n()),s(...i));let o=e.off;return e.events[E]=[],e.off=()=>{o(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let i of e.events[E])i();e.events[E]=[]}},de)},()=>{e.listen=s,e.off=o}}),N=(e,r,t)=>{Array.isArray(e)||(e=[e]);let n,s,o=()=>{if(s===b)return;s=b;let a=e.map(c=>c.get());if(!n||a.some((c,g)=>c!==n[g])){n=a;let c=r(...a);c&&c.then&&c.t?c.then(g=>{n===a&&i.set(g)}):(i.set(c),s=b)}},i=R(void 0),d=i.get;i.get=()=>(o(),d());let u,l=t?()=>{clearTimeout(u),u=setTimeout(o)}:o;return K(i,()=>{let a=e.map(c=>c.listen(l));return o(),()=>{for(let c of a)c()}}),i},m=(e,r)=>N(e,r),fe=(e,r)=>N(e,r,!0),V=(e={})=>{let r=R(e);return r.setKey=function(t,n){let s=r.value;typeof n>"u"&&t in r.value?(r.value={...r.value},delete r.value[t],r.notify(s,t)):r.value[t]!==n&&(r.value={...r.value,[t]:n},r.notify(s,t))},r};var p=V({isLoaded:!1,client:void 0,user:void 0,session:void 0,organization:void 0}),F=V(),y=R(null);m([p],e=>e.isLoaded);var C=fe([p,F],(e,r)=>ee(e.isLoaded,{session:e.session,user:e.user,organization:e.organization,client:e.client},r));m([C],e=>e.user);m([C],e=>e.session);var ge=m([C],e=>e.organization),A=m([p],e=>e.client),me=m([y],e=>e);m([A],e=>e?.sessions);var he=m([A],e=>e?.signIn),pe=m([A],e=>e?.signUp),I=(e,r)=>{K(e,()=>{y.get()?.telemetry?.record(le(r))})};I(he,"$signInStore");I(pe,"$signUpStore");I(ge,"$organizationStore");var ye=class J extends Error{static kind="ClerkError";clerkError=!0;code;longMessage;docsUrl;cause;get name(){return this.constructor.name}constructor(r){super(new.target.formatMessage(new.target.kind,r.message,r.code,r.docsUrl),{cause:r.cause}),Object.setPrototypeOf(this,J.prototype),this.code=r.code,this.docsUrl=r.docsUrl,this.longMessage=r.longMessage,this.cause=r.cause}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(r,t,n,s){const o="Clerk:",i=new RegExp(o.replace(" ","\\s*"),"i");return t=t.replace(i,""),t=`${o} ${t.trim()}

(code="${n}")

`,s&&(t+=`

Docs: ${s}`),t}};const ve=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function Ee({packageName:e,customMessages:r}){let t=e;function n(o,i){if(!i)return`${t}: ${o}`;let d=o;const u=o.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const l of u){const a=(i[l[1]]||"").toString();d=d.replace(`{{${l[1]}}}`,a)}return`${t}: ${d}`}const s={...ve,...r};return{setPackageName({packageName:o}){return typeof o=="string"&&(t=o),this},setMessages({customMessages:o}){return Object.assign(s,o||{}),this},throwInvalidPublishableKeyError(o){throw new Error(n(s.InvalidPublishableKeyErrorMessage,o))},throwInvalidProxyUrl(o){throw new Error(n(s.InvalidProxyUrlErrorMessage,o))},throwMissingPublishableKeyError(){throw new Error(n(s.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(n(s.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(o){throw new Error(n(s.MissingClerkProvider,o))},throw(o){throw new Error(n(o))}}}var k=class B extends ye{static kind="ClerkRuntimeError";clerkRuntimeError=!0;constructor(r,t){super({...t,message:r}),Object.setPrototypeOf(this,B.prototype)}};const we={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,r)=>r<5,retryImmediately:!1,jitter:!0},be=100,H=async e=>new Promise(r=>setTimeout(r,e)),W=(e,r)=>r?e*(1+Math.random()):e,ke=e=>{let r=0;const t=()=>{const n=e.initialDelay,s=e.factor;let o=n*Math.pow(s,r);return o=W(o,e.jitter),Math.min(e.maxDelayBetweenRetries||o,o)};return async()=>{await H(t()),r++}},Se=async(e,r={})=>{let t=0;const{shouldRetry:n,initialDelay:s,maxDelayBetweenRetries:o,factor:i,retryImmediately:d,jitter:u,onBeforeRetry:l}={...we,...r},a=ke({initialDelay:s,maxDelayBetweenRetries:o,factor:i,jitter:u});for(;;)try{return await e()}catch(c){if(t++,!n(c,t))throw c;l&&await l(t),d&&t===1?await H(W(be,u)):await a()}},_e="loadScript cannot be called when document does not exist",Re="loadScript cannot be called without a src";async function Ce(e="",r){const{async:t,defer:n,beforeLoad:s,crossOrigin:o,nonce:i}=r||{};return Se(()=>new Promise((u,l)=>{e||l(new Error(Re)),(!document||!document.body)&&l(new Error(_e));const a=document.createElement("script");o&&a.setAttribute("crossorigin",o),a.async=t||!1,a.defer=n||!1,a.addEventListener("load",()=>{a.remove(),u(a)}),a.addEventListener("error",c=>{a.remove(),l(c.error??new Error(`failed to load script: ${e}`))}),a.src=e,a.nonce=i,s?.(a),document.body.appendChild(a)}),{shouldRetry:(u,l)=>l<=5})}function Ae(e){return e?Ie(e)||Y(e):!0}function Ie(e){return/^http(s)?:\/\//.test(e||"")}function Y(e){return e.startsWith("/")}function Te(e){return e?Y(e)?new URL(e,window.location.origin).toString():e:""}function Oe(e){if(!e)return"";let r;if(e.match(/^(clerk\.)+\w*$/))r=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;r=/^(clerk\.)*/gi}return`clerk.${e.replace(r,"")}`}const Pe=(e,r="5.114.0")=>{if(e)return e;const t=Ue(r);return t?t==="snapshot"?"5.114.0":t:Me(r)},Ue=e=>e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/)?.[1],Me=e=>e.trim().replace(/^v/,"").split(".")[0],q="failed_to_load_clerk_js",xe="failed_to_load_clerk_js_timeout",S="Failed to load Clerk",{isDevOrStagingUrl:Le}=oe(),j=Ee({packageName:"@clerk/shared"});function De(e){j.setPackageName({packageName:e})}function _(){if(typeof window>"u"||!window.Clerk)return!1;const e=window.Clerk;return typeof e=="object"&&typeof e.load=="function"}function ze(e){if(typeof window>"u"||!window.performance)return!1;const r=performance.getEntriesByName(e,"resource");if(r.length===0)return!1;const t=r[r.length-1];return t.transferSize===0&&t.decodedBodySize===0&&(t.responseEnd===0||t.responseEnd>0&&t.responseStart>0||"responseStatus"in t&&(t.responseStatus>=400||t.responseStatus===0))}function U(e,r){return new Promise((t,n)=>{let s=!1;const o=(a,c)=>{clearTimeout(a),clearInterval(c)};r?.addEventListener("error",()=>{o(u,l),n(new k(S,{code:q}))});const i=()=>{s||_()&&(s=!0,o(u,l),t(null))},u=setTimeout(()=>{s||(s=!0,o(u,l),_()?t(null):n(new k(S,{code:xe})))},e);i();const l=setInterval(()=>{if(s){clearInterval(l);return}i()},100)})}const $e=async e=>{const r=e?.scriptLoadTimeout??15e3;if(_())return null;if(!e?.publishableKey)return j.throwMissingPublishableKeyError(),null;const t=Ke(e),n=document.querySelector("script[data-clerk-js-script]");if(n)if(ze(t))n.remove();else try{return await U(r,n),null}catch{n.remove()}const s=U(r);return Ce(t,{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:Ve(e)}).catch(o=>{throw new k(S+(o.message?`, ${o.message}`:""),{code:q,cause:o})}),s},Ke=e=>{const{clerkJSUrl:r,clerkJSVariant:t,clerkJSVersion:n,proxyUrl:s,domain:o,publishableKey:i}=e;if(r)return r;let d="";s&&Ae(s)?d=Te(s).replace(/http(s)?:\/\//,""):o&&!Le(T(i)?.frontendApi||"")?d=Oe(o):d=T(i)?.frontendApi||"";const u=t?`${t.replace(/\.+$/,"")}.`:"",l=Pe(n);return`https://${d}/npm/@clerk/clerk-js@${l}/dist/clerk.${u}browser.js`},Ne=e=>{const r={};return e.publishableKey&&(r["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(r["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(r["data-clerk-domain"]=e.domain),e.nonce&&(r.nonce=e.nonce),r},Ve=e=>r=>{const t=Ne(e);for(const n in t)r.setAttribute(n,t[n])};var G=()=>{["handleRedirectCallback"].forEach(r=>{document.querySelectorAll(`[data-clerk-function-id^="clerk-${r}"]`).forEach(n=>{const s=n.getAttribute("data-clerk-function-id"),o=window.__astro_clerk_function_props?.get(r)?.get(s)??{};y.get()?.[r]?.(o)})})},X=()=>{Object.entries({"create-organization":"mountCreateOrganization","organization-list":"mountOrganizationList","organization-profile":"mountOrganizationProfile","organization-switcher":"mountOrganizationSwitcher","user-avatar":"mountUserAvatar","user-button":"mountUserButton","user-profile":"mountUserProfile","sign-in":"mountSignIn","sign-up":"mountSignUp","google-one-tap":"openGoogleOneTap",waitlist:"mountWaitlist","pricing-table":"mountPricingTable","api-keys":"mountAPIKeys"}).forEach(([r,t])=>{document.querySelectorAll(`[data-clerk-id^="clerk-${r}"]`).forEach(s=>{const o=s.getAttribute("data-clerk-id"),i=window.__astro_clerk_component_props?.get(r)?.get(o);s&&y.get()?.[t](s,i)})})},Fe=e=>{let r=!1;return t=>{if(r){const n=window.Clerk;return new Promise(s=>n?(n.loaded&&(X(),G()),s(n.loaded)):s(!1))}return r=!0,e(t)}},M;De("@clerk/astro");function x(e){return(r,t)=>{t?.__internal_metadata?.navigationType==="internal"?e(history.state,"",r):t?.windowNavigate(r)}}var Je=Fe(Be);async function Be(e){let r=window.Clerk;if(!r){if(await $e(e),!window.Clerk)throw new Error("Failed to download latest ClerkJS. Contact support@clerk.com.");r=window.Clerk}return y.get()||y.set(r),M={routerPush:x(window.history.pushState.bind(window.history)),routerReplace:x(window.history.replaceState.bind(window.history)),...e},r.load(M).then(()=>{p.setKey("isLoaded",!0),me.notify(),X(),G(),r.addListener(t=>{p.setKey("client",t.client),p.setKey("user",t.user),p.setKey("session",t.session),p.setKey("organization",t.organization)})}).catch(()=>{})}var He=e=>{const{signInUrl:r,signUpUrl:t,isSatellite:n,proxyUrl:s,domain:o,publishableKey:i,telemetry:d,...u}=e||{};return{signInUrl:r||"/sign-in",signUpUrl:t||"/sign-up",isSatellite:n||void 0,proxyUrl:s||void 0,domain:o||void 0,publishableKey:i||"pk_test_ZW1pbmVudC10dXJ0bGUtMzAuY2xlcmsuYWNjb3VudHMuZGV2JA",telemetry:d||{disabled:P(),debug:P()},...u}};function We(e){async function r(t){const n=document.getElementById("__CLERK_ASTRO_DATA__");n&&F.set(JSON.parse(n.textContent||"{}"));const s=document.getElementById("__CLERK_ASTRO_SAFE_VARS__");let o={};s&&(o=JSON.parse(s.textContent||"{}")),await e(He({...t,...o}))}return r}var L="data-astro-transition-persist",Ye="data-emotion";function Ge(e,r){e.deselectScripts(r),e.swapRootAttributes(r);const t=document.querySelectorAll(`style[${Ye}]`);qe(r,Array.from(t));const n=e.saveFocus();e.swapBodyElement(r.body,document.body),n()}function qe(e,r){for(const t of Array.from(document.head.children)){const n=je(t,e);n?n.remove():r.includes(t)||t.remove()}document.head.append(...e.head.children)}function je(e,r){const t=e.getAttribute(L),n=t&&r.head.querySelector(`[${L}="${t}"]`);if(n)return n;if(e.matches("link[rel=stylesheet]")){const s=e.getAttribute("href");return r.head.querySelector(`link[rel=stylesheet][href="${s}"]`)}return null}var Xe=We(Je);export{Xe as r,Ge as s};
